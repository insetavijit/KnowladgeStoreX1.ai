# Context Structure

**Core definition:** **Context Structure** refers to the organization and formatting of the background information (RAG documents, history, reference data) provided to the model to enable accurate responses.

**Key idea:**

-   **Information Hierarchy:** The model must distinguish between the "Question" and the "Knowledge Base."
-   **Noise Reduction:** Poorly structured context looks like noise or conflicting instructions.
-   **Retrieval Efficiency:** How you present retrieved data determines how well the model "finds" the answer.

## Why It Matters

Dumping raw text into a prompt works for short snippets. But for production systems using RAG (Retrieval Augmented Generation), you might paste 10 disparate documents. Without structure, the model confuses Document A with Document B, or hallsucinates connections.

## Essential Functions

**1. Metadata injection:**
Providing the source, date, or title of context chunks.
*   "Source: Wikipedia (2023)"
*   "ID: doc_123"

**2. Relevance Scoring (Implicit):**
Ordering context by importance (placing the most relevant chunk first or last, avoiding the middle).

**3. Visual Separation:**
Using distinct formatting for context vs. instructions.

## Anatomy of Context Blocks

**Standard RAG Block:**
```text
### Reference Documents
Please answer the question using ONLY the following context:

[Document 1]
Title: Employee Handbook
Content: ...

[Document 2]
Title: Q4 Financials
Content: ...
```

**JSON Structure (Machine Readable):**
```json
{
  "context": [
    {"source": "wiki", "text": "..."},
    {"source": "internal_db", "text": "..."}
  ]
}
```
*Note: JSON context is highly effective for models that parse JSON well (GPT-4), as it natively separates entries.*

## Context Organization Strategies

| Strategy | Description | Best For |
| :--- | :--- | :--- |
| **Concatenation with Headers** | Stacking texts with `### Title` separators. | General purpose; most models. |
| **Numbered List** | "Excerpt 1...", "Excerpt 2..." | When citation/referencing is required in the output. |
| **JSON/XML Injection** | Wrapping context in data structures. | Complex programmatic tasks; API interactions. |

## Common Patterns

**1. The "Only" Constraint**
"Answer using *only* the context provided. Do not use outside knowledge."
(Crucial for reducing hallucinations)

**2. Citation Keys**
"If you use information from a document, cite it using [Doc 1]."
Requires the context to be structured with clear IDs.

**3. Context Pruning**
Removing headers, footers, and HTML boilerplate from raw text *before* putting it in the prompt to save tokens and attention.

## Quick Summaries

**30-second version:**
Context Structure is about how you package the "book" you want the AI to read. Instead of throwing loose pages at the model, you bind them into chapters with titles (metadata), clearly separated from each other (delimiters), and distinctly separate from the exam question (User Intent). Good structure allows the model to "cite its sources" and reason across multiple documents.

**One-line recall:**
**Context Structure = Organized, delimited, and metadata-rich information injection.**

---

**Section:** **1.1.2.6 Context Structure**
**Focus:** RAG & Information management
**Last updated:** December 2025

---
